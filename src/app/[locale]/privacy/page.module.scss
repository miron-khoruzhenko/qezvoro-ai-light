.article {
  /* локальные “переменные” (берут из tailwind/shadcn, иначе — фолбэки) */
  --fg: var(--foreground, #0f0f14);
  --muted-fg: var(--muted-foreground, #6b7280);
  --muted: var(--muted, #f3f4f6);
  // --border: var(--border, #e5e7eb);
	
  --primary: var(--primary, #3b82f6);
  --card: var(--card, #0b0c10);

  color: var(--fg);
  max-width: 75ch;
  margin-inline: auto;
  padding-inline: clamp(1rem, 3vw, 1.25rem);

  :where(h1, h2, h3, h4) { scroll-margin-top: 6rem; }

  p { line-height: 1.75; margin: 0 0 1.25rem !important; }
  strong { color: var(--fg); font-weight: 700; }
  em { font-style: italic; }
  small { font-size: 0.875rem; color: var(--muted-fg); }
  mark { background: #fff3bf; padding: .1em .25em; border-radius: .25rem; }

  a {
    color: var(--primary);
    text-decoration: underline;
    text-underline-offset: 3px;
    transition: color .2s ease, text-decoration-color .2s ease;
    &:hover { text-decoration: none; }
  }

  h1, h2, h3, h4, h5, h6 {
    color: var(--fg);
    font-weight: 700;
    line-height: 1.25;
    letter-spacing: -0.01em;
    margin: 2rem 0 .75rem;
  }
  h1 { font-size: clamp(1.75rem, 2.5vw, 2.5rem); margin-top: 0; }
  h2 { font-size: clamp(1.5rem, 2vw, 1.875rem); padding-bottom: .35rem; border-bottom: 1px solid var(--border); }
  h3 { font-size: clamp(1.25rem, 1.6vw, 1.35rem); }
  h4 { font-size: 1.1rem; }
  h5 { font-size: 1rem; font-weight: 600; color: var(--muted-fg); }
  h6 { font-size: .95rem; font-weight: 600; color: var(--muted-fg); }

  ul, ol { margin: .75rem 0 1.25rem; padding-left: 1.25rem; }
  ul { list-style: disc; }
  ol { list-style: decimal; }
  li {
    margin: .35rem 0;
    > p { margin: .25rem 0 .25rem !important; }
    ul, ol { margin: .35rem 0 .5rem; }
  }

  blockquote {
    margin: 1.25rem 0;
    padding: .75rem 1rem;
    border-left: 4px solid color-mix(in hsl, var(--primary) 40%, transparent);
    background: color-mix(in hsl, var(--muted) 70%, transparent);
    color: var(--muted-fg);
    border-radius: .5rem;
    p:last-child { margin-bottom: 0 !important; }
  }

  hr { margin: 2rem 0; border: 0; border-top: 1px solid var(--border); }

  img, video, iframe {
    display: block;
    max-width: 100%;
    height: auto;
    border-radius: .75rem;
    margin: 1rem 0;
  }
  figure { margin: 1.25rem 0; text-align: center;
    figcaption { margin-top: .5rem; font-size: .875rem; color: var(--muted-fg); }
  }

  table {
    width: 100%;
    border-collapse: collapse;
    font-size: .95rem;
    margin: 1.25rem 0;
    overflow: hidden;
    border-radius: .5rem;
  }
  thead th { text-align: left; padding: .75rem .75rem; background: color-mix(in hsl, var(--muted) 80%, transparent); border-bottom: 1px solid var(--border); }
  tbody td { padding: .65rem .75rem; border-bottom: 1px solid var(--border); }
  tbody tr:hover { background: color-mix(in hsl, var(--muted) 60%, transparent); }

  :not(pre) > code {
    background: color-mix(in hsl, var(--muted) 70%, transparent);
    padding: .15rem .35rem;
    border-radius: .375rem;
    font-family: ui-monospace, SFMono-Regular, Menlo, Consolas, "Liberation Mono", monospace;
    font-size: .9em;
  }

  pre {
    background: color-mix(in hsl, var(--card) 85%, #0b0c10);
    color: #e5e7eb;
    padding: 1rem 1.25rem;
    border-radius: .75rem;
    overflow: auto;
    line-height: 1.6;
    margin: 1.25rem 0;
    border: 1px solid color-mix(in hsl, var(--border) 70%, transparent);
  }
  pre code { background: transparent; padding: 0; font-size: .9rem; display: block; }

  details {
    background: color-mix(in hsl, var(--muted) 70%, transparent);
    border: 1px solid var(--border);
    border-radius: .5rem;
    padding: .75rem 1rem;
    margin: 1rem 0;
  }
  details[open] { background: color-mix(in hsl, var(--muted) 50%, transparent); }
  summary { cursor: pointer; font-weight: 600; margin: -.25rem 0 .5rem; }

  dl { margin: 1rem 0 1.25rem; }
  dt { font-weight: 600; margin-top: .5rem; }
  dd { margin-left: 1rem; color: var(--muted-fg); }

  sup, sub { font-size: .75em; line-height: 0; }
}

/* если есть сайдбар TOC рядом */
.toc {
  position: sticky;
  top: 6rem;
  align-self: start;
  border: 1px solid var(--border);
  background: color-mix(in hsl, var(--card) 75%, white);
  backdrop-filter: blur(6px);
  border-radius: 1rem;
  padding: .75rem;
  max-height: calc(100vh - 7rem);
  overflow: auto;

  .toc__title { font-size: .9rem; font-weight: 700; color: var(--muted-fg); padding: .25rem .5rem .5rem; }
  .toc__list { margin: .25rem 0 0; padding: 0; list-style: none; }
  .toc__item a {
    display: block; padding: .35rem .5rem; border-radius: .5rem;
    color: var(--muted-fg); text-decoration: none;
    &:hover { background: color-mix(in hsl, var(--muted) 60%, transparent); color: var(--fg); }
    &.is-active { background: color-mix(in hsl, var(--muted) 70%, transparent); color: var(--fg); }
  }
  .toc__item--lvl-3 a { margin-left: .75rem; }
}

@media (min-width: 1024px) {
  .article {
    p { font-size: 1.05rem; }
    h1 { font-size: 2.25rem; }
    h2 { font-size: 1.875rem; }
  }
}
